dataSources:
  ds0:
    dataSourceClassName: com.zaxxer.hikari.HikariDataSource
    driverClassName: com.mysql.cj.jdbc.Driver
    jdbcUrl: jdbc:mysql://your-host:3306/your-database?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    username: your-username
    password: your-password

rules:
- !SINGLE
  tables:
    - "*.*"
- !SHARDING
  tables:
    book_chapter:
      actualDataNodes: ds0.book_chapter$->{0..9}
      tableStrategy:
        standard:
          shardingColumn: book_id
          shardingAlgorithmName: book_chapter_inline
    book_content:
      actualDataNodes: ds0.book_content$->{0..9}
      tableStrategy:
        standard:
          shardingColumn: chapter_id
          shardingAlgorithmName: book_content_inline
  shardingAlgorithms:
    book_chapter_inline:
      type: INLINE
      props:
        algorithm-expression: book_chapter$->{book_id % 10}
    book_content_inline:
      type: INLINE
      props:
        algorithm-expression: book_content$->{chapter_id % 10}

props:
  sql-show: true
  sql-simple: false
